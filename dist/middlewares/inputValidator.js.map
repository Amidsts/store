{"version":3,"file":"inputValidator.js","sourceRoot":"src/","sources":["middlewares/inputValidator.ts"],"names":[],"mappings":";;AAGA,gDAC4B;AAE5B,MAAM,aAAa,GACjB,CAAC,MAAc,EAAE,YAAyC,MAAM,EAAE,EAAE,CACpE,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAClD,IAAI,CAAC;QACH,IAAI,UAAU,CAAC;QACf,IAAI,SAAS,KAAK,MAAM,EAAE,CAAC;YACzB,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpC,GAAG,CAAC,IAAI,GAAG,UAAU,CAAC;QACxB,CAAC;aAAM,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;YAClC,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtC,GAAG,CAAC,MAAM,GAAG,UAAU,CAAC;QAC1B,CAAC;aAAM,IAAI,SAAS,KAAK,OAAO,EAAE,CAAC;YACjC,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACrC,GAAG,CAAC,KAAK,GAAG,UAAU,CAAC;QACzB,CAAC;QAED,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,OAAO,IAAA,0BAAe,EAAC;YACrB,GAAG;YACH,OAAO,EAAE,GACP,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CACtB,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE;YACzC,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC;IACL,CAAC;AACH,CAAC,CAAC;AAEJ,kBAAe,aAAa,CAAC","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { Schema } from \"zod\";\n\nimport {responseHandler\n } from \"../utils/response\";\n\nconst validateInput =\n  (schema: Schema, fieldType: \"body\" | \"params\" | \"query\" = \"body\") =>\n  (req: Request, res: Response, next: NextFunction) => {\n    try {\n      let parsedData;\n      if (fieldType === \"body\") {\n        parsedData = schema.parse(req.body);\n        req.body = parsedData;\n      } else if (fieldType === \"params\") {\n        parsedData = schema.parse(req.params);\n        req.params = parsedData;\n      } else if (fieldType === \"query\") {\n        parsedData = schema.parse(req.query);\n        req.query = parsedData;\n      }\n\n      return next();\n    } catch (err) {\n      return responseHandler({\n        res,\n        message: `${\n          err.issues[0].path[0]\n        } ${err.issues[0].message.toLowerCase()}`,\n        status: 400,\n      });\n    }\n  };\n\nexport default validateInput;\n"]}